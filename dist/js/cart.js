"use strict";define("modules/cartStorge",["jquery"],function(e){var t="cartList";function n(e){return window.localStorage.setItem(t,JSON.stringify(e))}function s(){return JSON.parse(window.localStorage.getItem(t)||"[]")}return{addCartStorge:function(e,t){for(var o=s(),c=!1,i=-1,r=0;r<o.length;r++)o[r].goodsId==e.goodsId&&o[r].goodsColor==e.goodsColor&&(c=!0,i=r);c?o[i].goodsNumber+=e.goodsNumber:o.push(e),n(o),t()},setCartStorge:n,getCartStorge:s}}),requirejs.config({paths:{jquery:"../lib/jquery-3.4.1.min"}}),define("cart",["jquery","./modules/cartStorge"],function(v,e){var f=e.getCartStorge,m=e.setCartStorge,p=v("#cart");function b(){var e=p.find(".cart_list"),t=v(".cart_title_selectAll"),o=f(),c=o.map(function(e,t,o){return"\n              <li>\n                  <div>"+(e.goodsChecked?'<input class="cb" type="checkbox" checked>':'<input class="cb" type="checkbox">')+"</div>\n                  <div>"+e.goodsName+" ( "+e.goodsColor+" )</div>\n                  <div>¥ "+e.goodsPrice+'.00</div>\n                  <div>\n                      <span class="reduceBtn">-</span>\n                      <input class="cart_list_text" type="text" value="'+e.goodsNumber+'">\n                      <span class="addBtn">+</span>\n                  </div>\n                  <div class ="priceNumber">¥ '+e.goodsNumber*e.goodsPrice+'.00</div>\n                  <div class="removeBtn">删除</div>\n              </li>\n          '}).join("");e.html(c);for(var i,r,n,s,d=0,l=0,a=v(".cart_computed_price p").eq(1),e=v(".cart_computed_price p").eq(0),u=v(".cart_list_text"),g=p.find(".cb").get(),h=0;h<g.length;h++)g[h].checked&&(d+=Number(u.eq(h).val()),l+=o[h].goodsNumber*o[h].goodsPrice);a.html("已选择 "+d+"件商品"),e.html("总计：¥ "+l+".00"),i=o,c=p.find(".reduceBtn"),a=p.find(".addBtn"),e=p.find(".cart_list_text"),a.click(function(){var e=v(this).closest("li").index();i[e].goodsNumber++,m(i),b()}),c.click(function(){var e=v(this).closest("li").index();console.log(i),i[e].goodsNumber<=0||(i[e].goodsNumber--,m(i),b())}),e.on("input",function(){Number(v(this).val())||v(this).val("")}),e.on("blur",function(){Number(v(this).val())||v(this).val(1);var e=v(this).closest("li").index();i[e].goodsNumber=Number(v(this).val()),m(i),b()}),r=o,v(".removeBtn").click(function(){var e=v(this).closest("li").index();r.splice(e,1),m(r),b()}),n=o,p.find(".cb").click(function(){var e=v(this).closest("li").index();n[e].goodsChecked=this.checked,m(n),b()}),!function(){for(var e=p.find(".cb").get(),t=0;t<e.length;t++)if(!e[t].checked)return!1;return!0}()?t.prop("checked",!1):t.prop("checked",!0),s=o,v(".cart_title_selectAll").click(function(){for(var e=0;e<s.length;e++)s[e].goodsChecked=this.checked;m(s),b()})}b()});